{% extends "usuario/base.html" %}

{% block content %}
<h2 class="text-2xl font-bold mb-4">Editar Perfil</h2>

<form method="POST" enctype="multipart/form-data" class="max-w-md mx-auto mt-8">
    {% csrf_token %}
    
    <!-- Foto de perfil -->
    <div class="mb-4">
        <label class="block mb-2 font-bold">Foto de perfil</label>
        <img id="preview" src="{{ user.profile.foto.url }}" class="w-20 h-20 rounded-full mb-2 border-2 border-yellow-400">
        {{ form.foto }}
    </div>

    <!-- Nome -->
    <div class="mb-4">
        {{ form.nome.label_tag }}
        {{ form.nome }}
    </div>

    <!-- Email -->
    <div class="mb-4">
        {{ form.email.label_tag }}
        {{ form.email }}
    </div>

    <!-- BotÃ£o Salvar -->
    <button type="submit" class="mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
        Salvar
    </button>
</form>

<script>
    const fotoInput = document.getElementById('{{ form.foto.id_for_label }}');
    const preview = document.getElementById('preview');

    fotoInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
            }
            reader.readAsDataURL(file);
        }
    });
</script>
{% endblock %}
